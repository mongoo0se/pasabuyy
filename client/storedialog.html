<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Menu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        :root { font-family: 'Inter', sans-serif; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        body { padding-bottom: 100px; }
    </style>
</head>
<body class="bg-gray-50">

    <!-- HEADER -->
    <header class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 shadow-lg sticky top-0 z-40">
        <div class="flex justify-between items-center max-w-6xl mx-auto">
            <div>
                <h1 id="storeName" class="text-3xl font-bold"></h1>
                <p id="storeType" class="text-blue-100 mt-1"></p>
            </div>
            <button onclick="history.back()" class="bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition">
                ‚Üê Back
            </button>
        </div>

        <div class="flex flex-wrap gap-3 mt-4 text-sm max-w-6xl mx-auto">
            <span id="rating" class="bg-yellow-400 text-blue-600 px-3 py-1 rounded-full font-semibold"></span>
            <span id="deliveryTime" class="bg-white bg-opacity-20 text-white px-3 py-1 rounded-full">üì¶</span>
            <span id="deliveryFee" class="bg-white bg-opacity-20 text-white px-3 py-1 rounded-full">üöö</span>
            <span id="minOrder" class="bg-white bg-opacity-20 text-white px-3 py-1 rounded-full">Min Order</span>
        </div>
    </header>

    <!-- MENU -->
    <main class="p-6 max-w-6xl mx-auto">
        <div class="mb-8">
            <h2 class="text-2xl font-bold mb-6 text-slate-800">üìã Full Menu</h2>
            <div id="menuContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
        </div>
    </main>

    <!-- CART BAR -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg p-4">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div>
                <p class="text-gray-600 text-sm">Cart Total:</p>
                <p class="font-bold text-2xl text-blue-600">‚Ç±<span id="cartTotal">0</span></p>
            </div>
            <button onclick="checkout()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-bold transition shadow-lg">
                üõí Checkout
            </button>
        </div>
    </div>

    <script>
        // ===== STORE DATA FROM URL =====
        const params = new URLSearchParams(window.location.search);

        document.getElementById("storeName").textContent = params.get("name") || "Store";
        document.getElementById("storeType").textContent = params.get("type") || "Food";
        document.getElementById("rating").textContent = "‚≠ê " + (params.get("rating") || "4.5");
        document.getElementById("deliveryTime").textContent = "üì¶ " + (params.get("time") || "30 mins");
        document.getElementById("deliveryFee").textContent = "üöö " + (params.get("fee") || "‚Ç±40");
        document.getElementById("minOrder").textContent = "Min: " + (params.get("min") || "‚Ç±150");

        // ===== SAMPLE MENU DATABASE =====
        const menuItems = [
            { id: 1, name: "Signature Dish", price: 299, desc: "Chef's special creation", img: "üçΩÔ∏è" },
            { id: 2, name: "Classic Combo", price: 449, desc: "Perfect for 1 person", img: "üç¥" },
            { id: 3, name: "Premium Meal", price: 599, desc: "Deluxe with sides", img: "ü•ò" },
            { id: 4, name: "Seasonal Special", price: 349, desc: "Limited time offer", img: "üåü" },
            { id: 5, name: "Family Bundle", price: 899, desc: "Feeds 4 people", img: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶" },
            { id: 6, name: "Appetizer Platter", price: 399, desc: "Mix of starters", img: "ü•ó" },
            { id: 7, name: "Dessert Selection", price: 249, desc: "Sweet treats", img: "üç∞" },
            { id: 8, name: "Beverage Combo", price: 179, desc: "3 drinks included", img: "ü•§" }
        ];

        let cart = {};
        let cartTotal = 0;

        // ===== RENDER MENU =====
        const container = document.getElementById("menuContainer");

        menuItems.forEach(item => {
            const card = document.createElement("div");
            card.className = "bg-white rounded-xl shadow-sm hover:shadow-lg transition-all border border-gray-200 overflow-hidden";

            card.innerHTML = `
                <div class="p-4">
                    <div class="text-4xl mb-3">${item.img}</div>
                    <h3 class="font-bold text-lg text-slate-800">${item.name}</h3>
                    <p class="text-sm text-gray-600 mb-3">${item.desc}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-2xl font-bold text-blue-600">‚Ç±${item.price}</span>
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold transition">
                            + Add
                        </button>
                    </div>
                </div>
            `;

            card.querySelector("button").onclick = () => addToCart(item.id, item.name, item.price);
            container.appendChild(card);
        });

        // ===== CART FUNCTIONS =====
        function addToCart(id, name, price) {
            if (cart[id]) {
                cart[id].qty += 1;
            } else {
                cart[id] = { name, price, qty: 1 };
            }

            cartTotal += price;
            document.getElementById("cartTotal").textContent = cartTotal;

            // Show success toast
            showToast(`‚úÖ "${name}" added to cart!`);
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-32 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg font-semibold';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => toast.remove(), 2000);
        }

        function checkout() {
            if (cartTotal === 0) {
                alert("‚ùå Cart is empty! Add some items first.");
                return;
            }

            // Store cart data in sessionStorage for cart.html to access
            sessionStorage.setItem('cartData', JSON.stringify({
                items: cart,
                total: cartTotal,
                store: params.get("name")
            }));

            alert(`‚úÖ Proceeding to checkout...\nTotal: ‚Ç±${cartTotal}`);
            window.location.href = "cart.html";
        }
    </script>

</body>
</html>